from aiogram import types
from aiogram.dispatcher.filters.builtin import CommandStart
from aiogram.utils.markdown import hlink

from loader import dp
from utils import db
from keyboards import accept_kb, main_menu_kb


@dp.message_handler(CommandStart())
async def send_welcome(message: types.Message):
    user_id = message.from_user.id
    user = await db.get_user(user_id)

    if user:
        await message.delete()
        await message.answer("–í—ã–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç", reply_markup=main_menu_kb)
    else:
        await message.answer_sticker("CAACAgIAAxkBAAMGYVllOhTCuyx9DP8vOeswNLQ5WoMAAioDAALPu9QOH_K1GH9lnzAhBA")
        await message.answer("üëã–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ë–∞–¥–¥–∏, —è –±—É–¥—É —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å —Ç–µ–±—è –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 12 –Ω–µ–¥–µ–ª—å: "
                             "–¥–µ–ª–∏—Ç—å—Å—è, –ø–æ–º–æ–≥–∞—Ç—å, –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –∏, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å\n\n"
                             "–Ø —Ä–∞—Å—Å–∫–∞–∂—É —Ç–µ–±–µ –ø—Ä–æ –≤–∞–∂–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –∞—Ç–æ–º–Ω–æ–π –æ—Ç—Ä–∞—Å–ª–∏, –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª—é–¥–µ–π, "
                             "—Ç—Ä—É–¥—ã –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–º–æ–≥–∞–ª–∏ –∏ –ø–æ–º–æ–≥–∞—é—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å –∞—Ç–æ–º–Ω—É—é –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç—å, –ø–æ–¥–µ–ª—é—Å—å "
                             "—Å —Ç–æ–±–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–µ–∫—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã –ø–æ –ø—Ä–∞–≤—É –≥–æ—Ä–¥–∏–º—Å—è ‚öõÔ∏è\n\n"
                             "–¢—ã —É–∑–Ω–∞–µ—à—å –æ–± –æ—Å–Ω–æ–≤–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–∏–≤–∏–∑–∏–æ–Ω–æ–≤, –ø–æ–ª—É—á–∏—à—å —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ "
                             "—Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –∫—Ä—É–ø–Ω–µ–π—à–µ–π –Ω–∞—É—á–Ω–æ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π "
                             "–∫–æ–º–ø–∞–Ω–∏–∏ —Å—Ç—Ä–∞–Ω—ã –∏ –ø–æ–∑–Ω–∞–∫–æ–º–∏—à—å—Å—è —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏, –ø—Ä–æ–µ–∫—Ç–∞–º–∏, "
                             "–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏, —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏, —Ç–µ–±–µ —Ç–æ—á–Ω–æ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è! üî•")

        await message.answer(
            f"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –∑–Ω–∞–∫–æ–º—ã —Å "
            f"{hlink('–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ì–æ—Å–∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ ¬´–†–æ—Å–∞—Ç–æ–º¬ª', 'https://www.rosatom.ru/upload/iblock/cca/ccaff8fd4eab182ebd0e347053cd7945.pdf')}"
            " –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –µ—ë",
            reply_markup=accept_kb)
